# ST73xx åå°„å¼æ¶²æ™¶æ˜¾ç¤ºé©±åŠ¨åº“

[![License](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)
[![Platform](https://img.shields.io/badge/Platform-Raspberry%20Pi%20Pico-red.svg)](https://www.raspberrypi.com/products/raspberry-pi-pico/)
[![Version](https://img.shields.io/badge/Version-2.0.0-green.svg)](https://github.com/musicaJack/ST7305_2.9_Reflective_Lcd/releases)

[English](README.md) | ä¸­æ–‡

è¿™æ˜¯ä¸€ä¸ªä¸“ä¸ºæ ‘è“æ´¾Picoè®¾è®¡çš„ST7305å’ŒST7306åå°„å¼LCDæ˜¾ç¤ºå±çš„ç»¼åˆæ€§é«˜æ€§èƒ½é©±åŠ¨åº“ã€‚è¯¥åº“æä¾›äº†å®Œæ•´çš„å›¾å½¢æ¡†æ¶ï¼ŒåŒ…å«ç¡¬ä»¶æŠ½è±¡å±‚ã€ä¼˜åŒ–æ¸²æŸ“å¼•æ“å’Œæ˜“äºä½¿ç”¨çš„APIæ¥å£ã€‚

## âœ¨ ç‰¹æ€§

- **å¤šè®¾å¤‡æ”¯æŒ**ï¼šå®Œæ•´æ”¯æŒST7305å’ŒST7306åå°„å¼æ¶²æ™¶æ˜¾ç¤ºæ§åˆ¶å™¨
- **å›¾å½¢æ¡†æ¶**ï¼šå®Œæ•´çš„UIæŠ½è±¡å±‚ï¼Œé‡‡ç”¨Adafruit GFXé£æ ¼çš„API
- **é«˜çº§å›¾å½¢**ï¼šå†…ç½®å›¾å½¢ç»˜åˆ¶åŠŸèƒ½ï¼Œæ”¯æŒå½¢çŠ¶ã€çº¿æ¡ã€æ–‡æœ¬å’Œå¤æ‚åŠ¨ç”»
- **æ¨¡æ¿è®¾è®¡**ï¼šç°ä»£C++æ¨¡æ¿æ¶æ„ï¼Œç¡®ä¿ç±»å‹å®‰å…¨å’Œé«˜æ€§èƒ½
- **ç¡¬ä»¶æŠ½è±¡**ï¼šç¡¬ä»¶é©±åŠ¨ä¸å›¾å½¢æ¸²æŸ“çš„æ¸…æ™°åˆ†ç¦»
- **ä¼˜åŒ–SPI**ï¼šé«˜æ€§èƒ½SPIé€šä¿¡ï¼Œæ”¯æŒå¯é…ç½®å‚æ•°
- **å­—ä½“ç³»ç»Ÿ**ï¼šå†…ç½®å­—ä½“æ”¯æŒï¼Œå¯è‡ªå®šä¹‰å¸ƒå±€å’Œå¤§å°
- **é¢œè‰²ç®¡ç†**ï¼šæ”¯æŒç°åº¦å’Œå•è‰²æ¸²æŸ“æ¨¡å¼
- **æ—‹è½¬æ”¯æŒ**ï¼šæ˜¾ç¤ºæ—‹è½¬å’Œåæ ‡å˜æ¢
- **ç”µæºç®¡ç†**ï¼šä½åŠŸè€—å’Œé«˜åŠŸè€—æ¨¡å¼ï¼Œæé«˜èƒ½æºæ•ˆç‡

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

é¡¹ç›®é‡‡ç”¨ç°ä»£æ¨¡å—åŒ–è®¾è®¡ï¼Œå…·æœ‰æ¸…æ™°çš„å…³æ³¨ç‚¹åˆ†ç¦»ï¼š

### æ ¸å¿ƒç»„ä»¶

- **ç¡¬ä»¶é©±åŠ¨** (`st7305_driver.cpp`, `st7306_driver.cpp`)ï¼šåº•å±‚æ˜¾ç¤ºæ§åˆ¶å™¨å®ç°
- **UIæŠ½è±¡å±‚** (`st73xx_ui.cpp/hpp`)ï¼šç¡¬ä»¶æ— å…³çš„å›¾å½¢æ¥å£ (Adafruit GFXé£æ ¼)
- **å›¾å½¢å¼•æ“** (`pico_display_gfx.hpp/inl`)ï¼šåŸºäºæ¨¡æ¿çš„å›¾å½¢æ¸²æŸ“å¼•æ“
- **å­—ä½“ç³»ç»Ÿ** (`fonts/st73xx_font.cpp`)ï¼šå…¨é¢çš„å­—ä½“æ¸²æŸ“ï¼Œæ”¯æŒå¸ƒå±€é€‰é¡¹
- **ç¤ºä¾‹ç¨‹åº** (`examples/`)ï¼šå±•ç¤ºåŠŸèƒ½çš„ç»¼åˆæ¼”ç¤ºåº”ç”¨

### ç›®å½•ç»“æ„

```
â”œâ”€â”€ src/                           # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ st7305_driver.cpp         # ST7305æ§åˆ¶å™¨é©±åŠ¨
â”‚   â”œâ”€â”€ st7306_driver.cpp         # ST7306æ§åˆ¶å™¨é©±åŠ¨ (æ–°å¢)
â”‚   â”œâ”€â”€ st73xx_ui.cpp             # UIæŠ½è±¡å±‚ (æ–°å¢)
â”‚   â””â”€â”€ fonts/
â”‚       â””â”€â”€ st73xx_font.cpp       # å­—ä½“æ•°æ®å’Œæ¸²æŸ“ (å¢å¼º)
â”œâ”€â”€ include/                       # å¤´æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ st7305_driver.hpp         # ST7305é©±åŠ¨æ¥å£
â”‚   â”œâ”€â”€ st7306_driver.hpp         # ST7306é©±åŠ¨æ¥å£ (æ–°å¢)
â”‚   â”œâ”€â”€ st73xx_ui.hpp             # UIæŠ½è±¡æ¥å£ (æ–°å¢)
â”‚   â”œâ”€â”€ pico_display_gfx.hpp      # æ¨¡æ¿å›¾å½¢å¼•æ“ (æ–°å¢)
â”‚   â”œâ”€â”€ pico_display_gfx.inl      # æ¨¡æ¿å®ç° (æ–°å¢)
â”‚   â”œâ”€â”€ st73xx_font.hpp           # å­—ä½“ç³»ç»Ÿæ¥å£ (æ–°å¢)
â”‚   â””â”€â”€ gfx_colors.hpp            # é¢œè‰²å®šä¹‰ (æ–°å¢)
â”œâ”€â”€ examples/                      # ç¤ºä¾‹åº”ç”¨
â”‚   â”œâ”€â”€ st7305_demo.cpp           # ST7305ç»¼åˆæ¼”ç¤º (å¢å¼º)
â”‚   â””â”€â”€ st7306_demo.cpp           # ST7306æ¼”ç¤º (æ–°å¢)
â”œâ”€â”€ build/                         # æ„å»ºè¾“å‡ºç›®å½•
â”œâ”€â”€ CMakeLists.txt                # CMakeæ„å»ºé…ç½® (æ›´æ–°)
â””â”€â”€ build_pico.bat                # Windowsæ„å»ºè„šæœ¬
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¡¬ä»¶è¿æ¥

#### ST7305æ˜¾ç¤ºå±è¿æ¥
```
æ ‘è“æ´¾Pico              ST7305æ˜¾ç¤ºå±
+---------------+         +---------------+
|  GPIO18 (SCK) |-------->| SCK          |
|  GPIO19 (MOSI)|-------->| MOSI         |
|  GPIO17 (CS)  |-------->| CS           |
|  GPIO20 (DC)  |-------->| DC           |
|  GPIO15 (RST) |-------->| RST          |
|  3.3V         |-------->| VCC          |
|  GND          |-------->| GND          |
+---------------+         +---------------+
```

#### ST7306æ˜¾ç¤ºå±è¿æ¥
```
æ ‘è“æ´¾Pico              ST7306æ˜¾ç¤ºå±
+---------------+         +---------------+
|  GPIO18 (SCK) |-------->| SCK          |
|  GPIO19 (MOSI)|-------->| MOSI         |
|  GPIO17 (CS)  |-------->| CS           |
|  GPIO20 (DC)  |-------->| DC           |
|  GPIO15 (RST) |-------->| RST          |
|  3.3V         |-------->| VCC          |
|  GND          |-------->| GND          |
+---------------+         +---------------+
```

### è½¯ä»¶è®¾ç½®

1. **å…‹éš†ä»“åº“ï¼š**
```bash
git clone https://github.com/musicaJack/ST7305_2.9_Reflective_Lcd.git
cd ST7305_2.9_Reflective_Lcd
```

2. **æ„å»ºé¡¹ç›®ï¼š**
```bash
# Windows
./build_pico.bat

# Linux/Mac
mkdir build && cd build
cmake ..
make
```

## ğŸ“ APIä½¿ç”¨æŒ‡å—

### åŸºæœ¬è®¾ç½®ï¼ˆæ¨¡æ¿æ–¹å¼ï¼‰

```cpp
#include "st7305_driver.hpp"  // æˆ– "st7306_driver.hpp"
#include "pico_display_gfx.hpp"

// ç¡¬ä»¶å¼•è„šå®šä¹‰
#define PIN_DC   20
#define PIN_RST  15
#define PIN_CS   17
#define PIN_SCLK 18
#define PIN_SDIN 19

// åˆå§‹åŒ–æ˜¾ç¤ºé©±åŠ¨
st7305::ST7305Driver display(PIN_DC, PIN_RST, PIN_CS, PIN_SCLK, PIN_SDIN);

// åˆ›å»ºå›¾å½¢ä¸Šä¸‹æ–‡
pico_gfx::PicoDisplayGFX<st7305::ST7305Driver> gfx(
    display, 
    st7305::ST7305Driver::LCD_WIDTH, 
    st7305::ST7305Driver::LCD_HEIGHT
);

// åˆå§‹åŒ–
display.initialize();
```

### å›¾å½¢æ“ä½œ

```cpp
// æ¸…å±å’ŒåŸºæœ¬æ“ä½œ
display.clearDisplay();
gfx.fillScreen(WHITE);

// ç»˜åˆ¶åŸºæœ¬å›¾å½¢
gfx.drawPixel(x, y, BLACK);
gfx.drawLine(10, 10, 100, 10, BLACK);
gfx.drawRectangle(20, 20, 50, 30, BLACK);
gfx.drawFilledRectangle(30, 30, 40, 20, BLACK);
gfx.drawCircle(60, 60, 15, BLACK);
gfx.drawFilledCircle(80, 80, 20, BLACK);
gfx.drawTriangle(10, 10, 50, 10, 30, 40, BLACK);

// æ–‡æœ¬æ¸²æŸ“
display.drawString(10, 10, "ä½ å¥½ä¸–ç•Œ!", BLACK);
display.drawChar(x, y, 'A', BLACK);

// æ˜¾ç¤ºæ—‹è½¬
gfx.setRotation(1);  // 0: 0Â°, 1: 90Â°, 2: 180Â°, 3: 270Â°
display.setRotation(1);

// æ›´æ–°æ˜¾ç¤º
display.display();
```

### é«˜çº§åŠŸèƒ½

```cpp
// ST7306ç°åº¦æ”¯æŒï¼ˆ4çº§ï¼‰
st7306::ST7306Driver display306(/*å¼•è„š*/);
display306.drawPixelGray(x, y, st7306::ST7306Driver::COLOR_GRAY1);
display306.drawPixelGray(x, y, st7306::ST7306Driver::COLOR_GRAY2);

// å­—ä½“å¸ƒå±€é…ç½®
display.setFontLayout(st7306::FontLayout::Horizontal);
display.setFontLayout(st7306::FontLayout::Vertical);

// ç”µæºç®¡ç†
display.lowPowerMode();
display.highPowerMode();
display.displaySleep(true);
display.displayOn(false);
```

### é«˜çº§å›¾å½¢ç¤ºä¾‹

```cpp
// å¤æ‚åŠ¨ç”»ç¤ºä¾‹
void windmillAnimation() {
    const int CENTER_X = gfx.width() / 2;
    const int CENTER_Y = gfx.height() / 2;
    const int BLADE_COUNT = 3;
    const int BLADE_LENGTH = 60;
    
    for (float angle = 0; angle < 2 * M_PI; angle += 0.1) {
        gfx.fillScreen(WHITE);
        
        // ç»˜åˆ¶é£è½¦å¶ç‰‡
        for (int i = 0; i < BLADE_COUNT; i++) {
            float blade_angle = angle + (i * 2 * M_PI / BLADE_COUNT);
            int end_x = CENTER_X + BLADE_LENGTH * cos(blade_angle);
            int end_y = CENTER_Y + BLADE_LENGTH * sin(blade_angle);
            
            gfx.drawLine(CENTER_X, CENTER_Y, end_x, end_y, BLACK);
        }
        
        // ç»˜åˆ¶ä¸­å¿ƒè½®æ¯‚
        gfx.drawFilledCircle(CENTER_X, CENTER_Y, 5, BLACK);
        
        display.display();
        sleep_ms(50);
    }
}
```

## ğŸ†• ç‰ˆæœ¬2.0æ–°ç‰¹æ€§

### ä¸»è¦å¢å¼ºåŠŸèƒ½

1. **ST7306æ”¯æŒ**ï¼šæ–°å¢å¯¹ST7306æ§åˆ¶å™¨çš„å®Œæ•´æ”¯æŒï¼ŒåŒ…å«4çº§ç°åº¦æ˜¾ç¤º
2. **UIæŠ½è±¡å±‚**ï¼šå—Adafruit GFXå¯å‘çš„å…¨æ–°ç¡¬ä»¶æ— å…³å›¾å½¢æ¥å£
3. **æ¨¡æ¿æ¶æ„**ï¼šç°ä»£C++æ¨¡æ¿è®¾è®¡ï¼Œæä¾›æ›´å¥½çš„æ€§èƒ½å’Œç±»å‹å®‰å…¨æ€§
4. **å¢å¼ºå­—ä½“ç³»ç»Ÿ**ï¼šæ”¹è¿›çš„å­—ä½“æ¸²æŸ“ï¼Œæ”¯æŒå¸ƒå±€é€‰é¡¹å’Œæ›´å¥½çš„æ€§èƒ½
5. **é«˜çº§å›¾å½¢**ï¼šå¤æ‚å½¢çŠ¶ç»˜åˆ¶ã€å¤šè¾¹å½¢æ”¯æŒå’ŒåŠ¨ç”»èƒ½åŠ›
6. **åŒç›®æ ‡æ„å»º**ï¼šæ”¯æŒåŒæ—¶æ„å»ºST7305å’ŒST7306ç¤ºä¾‹

### APIæ”¹è¿›

- **ç»Ÿä¸€æ¥å£**ï¼šä¸åŒæ˜¾ç¤ºæ§åˆ¶å™¨é—´çš„ä¸€è‡´API
- **æ›´å¥½çš„å‘½å**ï¼šæ›´ç›´è§‚çš„å‡½æ•°åç§°å’Œä¸€è‡´çš„å‚æ•°é¡ºåº
- **å¢å¼ºæ–‡æ¡£**ï¼šå…¨é¢çš„å†…è”æ–‡æ¡£å’Œç¤ºä¾‹
- **é”™è¯¯å¤„ç†**ï¼šæ”¹è¿›çš„é”™è¯¯æ£€æŸ¥å’ŒéªŒè¯

### æ€§èƒ½ä¼˜åŒ–

- **ä¼˜åŒ–SPI**ï¼šæ›´å¿«çš„é€šä¿¡ï¼Œå‡å°‘å¼€é”€
- **å†…å­˜æ•ˆç‡**ï¼šæ›´å¥½çš„ç¼“å†²åŒºç®¡ç†å’Œå‡å°‘å†…å­˜å ç”¨
- **æ¸²æŸ“é€Ÿåº¦**ï¼šä¼˜åŒ–çš„ç»˜åˆ¶ç®—æ³•ï¼Œå®ç°æ›´å¿«çš„æ›´æ–°

## ğŸ”§ æ„å»ºç›®æ ‡

é¡¹ç›®ç°åœ¨æ”¯æŒå¤šä¸ªæ„å»ºç›®æ ‡ï¼š

- `ST7305_Display`ï¼šST7305æ¼”ç¤ºåº”ç”¨ç¨‹åº
- `ST7306_Display`ï¼šST7306æ¼”ç¤ºåº”ç”¨ç¨‹åº

æ¯ä¸ªç›®æ ‡éƒ½åŒ…å«å±•ç¤ºç›¸åº”æ§åˆ¶å™¨åŠŸèƒ½çš„ç»¼åˆç¤ºä¾‹ã€‚

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ˜¾ç¤ºä¸å·¥ä½œï¼š**
   - éªŒè¯ç”µæºä¾›åº”ç¨³å®šåœ¨3.3V
   - æ£€æŸ¥æ‰€æœ‰å¼•è„šè¿æ¥
   - ç¡®ä¿SPIé…ç½®ä¸æ‚¨çš„ç¡¬ä»¶åŒ¹é…

2. **æ˜¾ç¤ºè´¨é‡å·®ï¼š**
   - æ£€æŸ¥åˆå§‹åŒ–åºåˆ—
   - éªŒè¯æ˜¾ç¤ºåŒºåŸŸé…ç½®
   - ç¡®è®¤åƒç´ å†™å…¥é€»è¾‘

3. **æ€§èƒ½é—®é¢˜ï¼š**
   - åœ¨é€‚å½“æ—¶ä½¿ç”¨ä½åŠŸè€—æ¨¡å¼
   - ä¼˜åŒ–SPIæ—¶é’Ÿé€Ÿåº¦
   - åœ¨ä¸ä½¿ç”¨æ˜¾ç¤ºæ—¶å¯ç”¨ç¡çœ æ¨¡å¼

## ğŸ¤ è´¡çŒ®

æˆ‘ä»¬æ¬¢è¿è´¡çŒ®ï¼è¯·ç¡®ä¿æ‚¨çš„æäº¤ï¼š

1. éµå¾ªç°æœ‰çš„ä»£ç é£æ ¼å’Œçº¦å®š
2. åŒ…å«å…¨é¢çš„æ–‡æ¡£å’Œæ³¨é‡Š
3. æ·»åŠ é€‚å½“çš„æµ‹è¯•è¦†ç›–
4. æ›´æ–°ç›¸å…³æ–‡æ¡£

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ã€‚è¯¦è§[LICENSE](LICENSE)æ–‡ä»¶ã€‚

## ğŸ“§ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜ã€å»ºè®®æˆ–éœ€è¦æ”¯æŒï¼š

- **é‚®ç®±**ï¼šyinyue@beingdigital.cn
- **é—®é¢˜åé¦ˆ**ï¼š[GitHub Issues](https://github.com/musicaJack/ST7305_2.9_Reflective_Lcd/issues)

## ğŸ™ è‡´è°¢

ç‰¹åˆ«æ„Ÿè°¢æ‰€æœ‰ä¸ºæ”¹è¿›è¿™ä¸ªåº“å¹¶ä½¿å…¶æ›´æ˜“äºåˆ›å®¢ç¤¾åŒºä½¿ç”¨è€Œè´¡çŒ®åŠ›é‡çš„äººã€‚ 